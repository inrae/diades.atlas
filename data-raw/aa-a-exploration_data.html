<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>00-exploration-of-data</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">00-exploration-of-data</h1>



<div id="installation" class="section level2">
<h2>Installation</h2>
<p>Install the present package and use its core functions</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&#39;inrae/diades.atlas&#39;</span>)</span></code></pre></div>
</div>
<div id="packages" class="section level2">
<h2>Packages</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RPostgres)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># library(diades.atlas)</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>pkgload<span class="sc">::</span><span class="fu">load_all</span>()</span></code></pre></div>
<p><strong>You can use this package without opening the Shiny
application</strong></p>
</div>
<div id="connect-to-the-database" class="section level2">
<h2>Connect to the database</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>se <span class="ot">&lt;-</span> <span class="fu">new.env</span>()</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>conn_eurodiad <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  RPostgres<span class="sc">::</span><span class="fu">Postgres</span>(), </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">dbname =</span> <span class="st">&#39;eurodiad&#39;</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">host =</span> <span class="st">&#39;&lt;your-host&gt;&#39;</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">port =</span> <span class="dv">5432</span>,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">user =</span> <span class="st">&#39;&lt;your-username&gt;&#39;</span>,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">password =</span> rstudioapi<span class="sc">::</span><span class="fu">askForPassword</span>(<span class="st">&quot;Database password&quot;</span>))</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>session<span class="sc">$</span>userData<span class="sc">$</span>con <span class="ot">&lt;-</span>conn_eurodiad</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For ThinkR only</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>se <span class="ot">&lt;-</span> <span class="fu">new.env</span>()</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>conn_eurodiad <span class="ot">&lt;-</span> <span class="fu">connect</span>(<span class="at">session =</span> se)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>DBI<span class="sc">::</span><span class="fu">dbListTables</span>(conn_eurodiad)</span></code></pre></div>
<pre><code>##  [1] &quot;abundance_level&quot;          &quot;basin&quot;                   
##  [3] &quot;basin_outlet&quot;             &quot;casestudy_basin&quot;         
##  [5] &quot;category&quot;                 &quot;cices&quot;                   
##  [7] &quot;climatic_model&quot;           &quot;hydiadparameter&quot;         
##  [9] &quot;ices_area&quot;                &quot;ices_grass&quot;              
## [11] &quot;ices_rectangle&quot;           &quot;iucn_classification&quot;     
## [13] &quot;iucn_level&quot;               &quot;lang85_85&quot;               
## [15] &quot;species&quot;                  &quot;species_rectangle&quot;       
## [17] &quot;v_abundance&quot;              &quot;v_maxvalue_es&quot;           
## [19] &quot;v_hybrid_model&quot;           &quot;v_hybrid_model_mavg&quot;     
## [21] &quot;v_ices_geom&quot;              &quot;v_occurence&quot;             
## [23] &quot;v_species_ices_occurence&quot; &quot;abundance&quot;               
## [25] &quot;casestudy&quot;                &quot;ecosystemic_services&quot;    
## [27] &quot;esvalue&quot;                  &quot;hybrid_model_result&quot;     
## [29] &quot;locale&quot;                   &quot;outlet_distance&quot;         
## [31] &quot;species_division&quot;         &quot;species_iucn&quot;            
## [33] &quot;subcategory&quot;              &quot;v_basin&quot;                 
## [35] &quot;v_ecosystemic_services&quot;   &quot;v_iucn&quot;</code></pre>
</div>
<div id="explore-data" class="section level2">
<h2>Explore data</h2>
<p>It is recommended to use <code>tbl()</code> instead of
<code>dbGetQuery()</code> to connect to a table in the database.<br />
<code>tbl()</code> does not download the table, it only connect to the
database and let it run the query. This means that if you run a
<code>filter()</code> or a <code>mutate()</code> after that, the
database executes it, not R, which is more efficient.<br />
However, at some point, some of your {tidyverse} operations can not be
realised or translated in SQL, hence, you need to download the resulting
dataset using <code>collect()</code>. Then you can continue as
usual.</p>
<p>For instance.</p>
<ul>
<li><code>dbGetQuery()</code> download data in R</li>
<li><code>filter()</code> is executed by R in your R session</li>
<li>Note that <code>!!</code> is a specific to using {dplyr} with SQL
there.</li>
<li>This is because the variable after it (e.g. <code>species_id</code>)
is defined in the R session, but not in the database. Therefore, before
sending the SQL query to the database, R has to transform the variable
by its real value in R. Otherwise, it will send the word
<code>&quot;species_id&quot;</code> which does not make sense for the SQL
database, instead of the number you wanted to put.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>get_data_dbi <span class="ot">&lt;-</span> <span class="cf">function</span>(conn_eurodiad, species_id, scenario) {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  query <span class="ot">&lt;-</span> <span class="st">&quot;SELECT * FROM diadesatlas.v_hybrid_model&quot;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dbGetQuery</span>(conn_eurodiad, query) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(species_id <span class="sc">%in%</span> <span class="sc">!!</span>species_id,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>           climatic_scenario <span class="sc">%in%</span> <span class="sc">!!</span>scenario) </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Use it</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="fu">get_data_dbi</span>(</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  conn_eurodiad,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">species_id =</span> <span class="fu">c</span>(<span class="dv">6</span>),</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">scenario =</span> <span class="st">&#39;rcp85&#39;</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##   hybrid_model_result_id basin_id species_id climatic_model_id year      nit
## 1                1395745        1          6                 2 1951 568.9058
## 2                1395746        1          6                 2 1952 485.9221
## 3                1395747        1          6                 2 1953 429.9423
## 4                1395748        1          6                 2 1954 383.9996
## 5                1395749        1          6                 2 1955 297.9209
## 6                1395750        1          6                 2 1956 208.8928
##         hsi saturation_rate climatic_scenario climatic_model_code oceanic_model
## 1 0.2442476       0.2697492             rcp85             cnrmcm5      CNRM-CM5
## 2 0.3222632       0.1746248             rcp85             cnrmcm5      CNRM-CM5
## 3 0.1945927       0.2558784             rcp85             cnrmcm5      CNRM-CM5
## 4 0.2457150       0.1809877             rcp85             cnrmcm5      CNRM-CM5
## 5 0.0849822       0.4059972             rcp85             cnrmcm5      CNRM-CM5
## 6 0.2351029       0.1029000             rcp85             cnrmcm5      CNRM-CM5
##       atmospheric_model climatic_model_hm basin_name  fish_name  latin_name
## 1 CNRM-CERFACS-CNRM-CM5                cn         Aa Allis shad Alosa alosa
## 2 CNRM-CERFACS-CNRM-CM5                cn         Aa Allis shad Alosa alosa
## 3 CNRM-CERFACS-CNRM-CM5                cn         Aa Allis shad Alosa alosa
## 4 CNRM-CERFACS-CNRM-CM5                cn         Aa Allis shad Alosa alosa
## 5 CNRM-CERFACS-CNRM-CM5                cn         Aa Allis shad Alosa alosa
## 6 CNRM-CERFACS-CNRM-CM5                cn         Aa Allis shad Alosa alosa
##   simplified_name
## 1        A. alosa
## 2        A. alosa
## 3        A. alosa
## 4        A. alosa
## 5        A. alosa
## 6        A. alosa</code></pre>
<ul>
<li><code>tbl()</code> only connects to the table, only a glimpse of the
data is presented</li>
<li><code>filter()</code> is run by the SQL database</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>get_data_tbl <span class="ot">&lt;-</span> <span class="cf">function</span>(conn_eurodiad, species_id, scenario) {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl</span>(conn_eurodiad, <span class="st">&quot;v_hybrid_model&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(species_id <span class="sc">%in%</span> <span class="sc">!!</span>species_id,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>           climatic_scenario <span class="sc">%in%</span> <span class="sc">!!</span>scenario) </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Use it</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="fu">get_data_tbl</span>(conn_eurodiad,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">species_id =</span> <span class="fu">c</span>(<span class="dv">6</span>),</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">scenario =</span> <span class="st">&#39;rcp85&#39;</span>)</span></code></pre></div>
<pre><code>## # Source:   lazy query [?? x 17]
## # Database: postgres [diadesatlas_owner@localhost:5432/diades]
##    hybrid_model_result_… basin_id species_id climatic_model_…  year   nit    hsi
##                    &lt;int&gt;    &lt;int&gt;      &lt;int&gt;            &lt;int&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1               1395745        1          6                2  1951 569.  0.244 
##  2               1395746        1          6                2  1952 486.  0.322 
##  3               1395747        1          6                2  1953 430.  0.195 
##  4               1395748        1          6                2  1954 384.  0.246 
##  5               1395749        1          6                2  1955 298.  0.0850
##  6               1395750        1          6                2  1956 209.  0.235 
##  7               1395751        1          6                2  1957 140.  0.327 
##  8               1395752        1          6                2  1958 101.  0.415 
##  9               1395753        1          6                2  1959  66.9 0.246 
## 10               1395754        1          6                2  1960  36.8 0.380 
## # … with more rows, and 10 more variables: saturation_rate &lt;dbl&gt;,
## #   climatic_scenario &lt;chr&gt;, climatic_model_code &lt;chr&gt;, oceanic_model &lt;chr&gt;,
## #   atmospheric_model &lt;chr&gt;, climatic_model_hm &lt;chr&gt;, basin_name &lt;chr&gt;,
## #   fish_name &lt;chr&gt;, latin_name &lt;chr&gt;, simplified_name &lt;chr&gt;</code></pre>
<ul>
<li>If you need to create some {ggplot2} figures after that, you can
collect</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>get_data_tbl_collect <span class="ot">&lt;-</span> <span class="cf">function</span>(conn_eurodiad, species_id, scenario) {</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl</span>(conn_eurodiad, <span class="st">&quot;v_hybrid_model&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(species_id <span class="sc">%in%</span> <span class="sc">!!</span>species_id,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>           climatic_scenario <span class="sc">%in%</span> <span class="sc">!!</span>scenario) <span class="sc">%&gt;%</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># From collect(), the full data is in the R session</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">collect</span>()</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Use it</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="fu">get_data_tbl_collect</span>(conn_eurodiad,</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>                     <span class="at">species_id =</span> <span class="fu">c</span>(<span class="dv">6</span>),</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>                     <span class="at">scenario =</span> <span class="st">&#39;rcp85&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(basin_id <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year)) <span class="sc">+</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> hsi))</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<ul>
<li>Note that you can use a full SQL query with <code>tbl()</code></li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>get_data_tbl_query_collect <span class="ot">&lt;-</span> <span class="cf">function</span>(conn_eurodiad, species_id, scenario) {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  query <span class="ot">&lt;-</span> <span class="st">&quot;SELECT * FROM diadesatlas.v_hybrid_model&quot;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl</span>(conn_eurodiad, <span class="fu">sql</span>(query)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Adds a filter to be run as SQL in the database</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(species_id <span class="sc">%in%</span> <span class="sc">!!</span>species_id,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>           climatic_scenario <span class="sc">%in%</span> <span class="sc">!!</span>scenario) <span class="sc">%&gt;%</span> </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># From collect(), the full data is in the R session</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">collect</span>()</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Use it</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="fu">get_data_tbl_query_collect</span>(conn_eurodiad,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>                           <span class="at">species_id =</span> <span class="fu">c</span>(<span class="dv">6</span>),</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>                           <span class="at">scenario =</span> <span class="st">&#39;rcp85&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(basin_id <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year)) <span class="sc">+</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> hsi))</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="reprex-invalid-ices_geom" class="section level2">
<h2>Reprex invalid ices_geom</h2>
<p>Two polygons of ices_geom have invalid geometries.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>ices_geom <span class="ot">&lt;-</span> <span class="fu">st_read</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  conn_eurodiad,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">query =</span> <span class="st">&quot;SELECT * FROM diadesatlas.v_ices_geom;&quot;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="st">&quot;+proj=wintri&quot;</span>) <span class="co">#%&gt;%</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># rmapshaper::ms_simplify()</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>invalid_pols <span class="ot">&lt;-</span> ices_geom <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">st_is_valid</span>(.))</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(invalid_pols)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>This makes the interactive map fails.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>map_invalid <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(invalid_pols)<span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_sf</span>()</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tmap_leaflet</span>(map_invalid)</span></code></pre></div>
<pre><code>## Linking to GEOS 3.10.2, GDAL 3.4.1, PROJ 8.2.1</code></pre>
<pre><code>## Error: Shape contains invalid polygons. Please fix it or set tmap_options(check.and.fix = TRUE) and rerun the plot</code></pre>
</div>
<div id="disconnect-from-the-database" class="section level2">
<h2>Disconnect from the database</h2>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>DBI<span class="sc">::</span><span class="fu">dbDisconnect</span>(conn_eurodiad)</span></code></pre></div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
